const scanDirectory = require("./fileScanner");
const calcolaMetriche = require("./calcolaMetriche");

/**
 * Esegue la scansione e il calcolo delle metriche per una cartella.
 */
const processFolder = async (dirPath) => {
    console.time(`‚è≥ Elaborazione di ${dirPath}`);
    
    try {
        console.log(`üìÇ Elaborazione avviata per: ${dirPath}`);
        const fileList = await scanDirectory(dirPath);

        if (fileList.length > 0) {
            await calcolaMetriche(dirPath, fileList);
        } else {
            console.log(`üîÑ Nessun file trovato in ${dirPath}, nessuna metrica da calcolare.`);
        }
    } catch (error) {
        console.error(`‚ùó Errore durante l'elaborazione di ${dirPath}:`, error.message);
    }

    console.timeEnd(`‚è≥ Elaborazione di ${dirPath}`);
};

module.exports = processFolder;
